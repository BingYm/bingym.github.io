---
title: "Linux File System"
date: 2022-01-29T19:47:16+08:00
categories: ["original"]
tags: ["linux"]
draft: false
---

## 分区和文件系统

### 分区类型

- 主分区：最多只能有4个

- 扩展分区：只能有一个，也算作主分区的一个，也就是说主分区加扩展分区最多有4个。但是扩展分区不能存储数据和格式化，必须再划分成逻辑分区才能使用

- 逻辑分区：逻辑分区是在扩展分区中划分的。如果是IDE硬盘，Linux最多支持59个逻辑分区，如果是SCSI硬盘，Linux最多支持11个逻辑分区

### 分区表示方法

|           | 分区设备名 |
| --------- | ---------- |
| 主分区1   | /dev/sda1  |
| 主分区2   | /dev/sda2  |
| 主分区3   | /dev/sda3  |
| 扩展分区  | /dev/sda4  |
| 逻辑分区1 | /dev/sda5  |
| 逻辑分区2 | /dev/sda6  |
| 逻辑分区3 | /dev/sda7  |

### 文件系统

#### ext2

是ext文件系统的升级版本，红帽7.2版本以前的系统默认都是ext2文件系统。1993年发布，最大支持16TB的分区和最大2TB的文件

#### ext3

是ext2文件系统的升级版本，最大的区别就是带日志功能，以在系统突然停止的时候提高文件系统的可靠性。支持最大16TB的分区和最大2TB的文件

#### ext4

是ext3的升级版本。在性能、伸缩性和可靠性方面进行了大量改进。是CentOS6.3的默认文件系统。支持1EB的文件系统和16TB文件。

## 文件系统常用命令

### 文件系统查看命令df

#### 语法

```
df [选项] [挂载点]
```

- `-a`显示所有的文件系统信息，包括特殊文件系统，如`/proc`、`/sysfs`

- `-h`使用习惯单位显示容量，如kb、mb、gb等

- `-T`显示文件系统类型

- `-m`以MB为单位显示容量

- `-k`以kb为单位显示容量，默认是以kb为单位

### 统计目录或文件大小du

#### 语法

```
du [选项] [目录或文件名]
```

- `-a`显示每个子文件的磁盘占用量。默认只统计子目录的磁盘占用量

- `-h`使用习惯单位显示磁盘占用量

- `-s`统计总占用量，而不列出子目录和子文件的占用量

#### du命令和df命令的区别

- df命令是从文件系统角度考虑的，不光要考虑文件占用的空间，还要统计被命令或程序占用的空间(最常用的就是文件已经删除，但是程序并没有释放空间)

- du命令是面向文件的，只会计算文件或目录占用的空间

- df更准确

### 文件系统修复命令fsck

#### 语法

```
fsck [选项] 分区设备文件名
```

- `-a`不用显示用户提示，自动修复文件系统

- `-y`自动修复。和`-a`作用一致，不过有些文件系统只支持`-y`

### 显示磁盘状态命令dumpe2fs

### 挂载命令

#### 查询与自动挂载

- `mount -l`查询系统中已经挂载的设备，`-l`会显示卷标名称

- `mount -a`依据配置文件`/etc/fstab`的内容，自动挂载

### 挂载光盘与U盘

### 支持NTFS文件系统
